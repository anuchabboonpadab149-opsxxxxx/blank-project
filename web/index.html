<!doctype html>
<html lang="th">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Fortune ‚Ä¢ ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ß‡∏±‡∏î‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏£‡∏¥‡πà‡∏°</title>
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link href="https://fonts.googleapis.com/css2?family=Prompt:wght@300;400;600&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <div class="container">
    <header>
      <div class="brand"><a href="./index.html" style="color:#fff;text-decoration:none">üîÆ Fortune</a></div>
      <nav>
        <a href="./pages/packages.html">‡πÅ‡∏û‡πá‡∏Å‡πÄ‡∏Å‡∏à</a>
        <a href="./pages/draw.html">‡πÄ‡∏™‡∏µ‡πà‡∏¢‡∏á‡∏ó‡∏≤‡∏¢</a>
        <a href="./pages/history.html">‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥</a>
        <span id="nav-auth"><a href="./pages/login.html">‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö</a></span>
        <span id="nav-me" class="hidden">‡∏ö‡∏±‡∏ç‡∏ä‡∏µ: <span id="me-id"></span> ¬∑ <a href="#" id="btn-logout">‡∏≠‡∏≠‡∏Å</a></span>
      </nav>
    </header>

    <div class="hero card">
      <div class="badge">‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏ô‡∏≤‡∏¢‡πÇ‡∏ä‡∏Ñ‡∏ä‡∏∞‡∏ï‡∏≤ ‚Ä¢ ‡πÄ‡∏ã‡∏µ‡∏¢‡∏°‡∏ã‡∏µ ‚Ä¢ ‡πÑ‡∏û‡πà‡∏¢‡∏¥‡∏õ‡∏ã‡∏µ</div>
      <h2>‡πÄ‡∏•‡∏∑‡∏≠‡∏Å ‚Äú‡∏ß‡∏±‡∏î‚Äù ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡∏ï‡∏≤‡∏°‡∏•‡∏≥‡∏î‡∏±‡∏ö‡∏Ç‡∏±‡πâ‡∏ô</h2>
      <p class="muted">‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô: ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ß‡∏±‡∏î ‚Üí ‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö/‡∏™‡∏°‡∏±‡∏Ñ‡∏£ ‚Üí ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÅ‡∏û‡πá‡∏Å‡πÄ‡∏Å‡∏à ‚Üí ‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô ‚Üí ‡πÄ‡∏™‡∏µ‡πà‡∏¢‡∏á‡∏ó‡∏≤‡∏¢ ‚Üí ‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥</p>
    </div>

    <section id="temples" class="temple-list">
      <!-- dynamic plaques -->
    </section>

    <div class="footer">¬© Fortune</div>
  </div>

  <script src="config.js"></script>
  <script src="app.js"></script>
  <script>
    // Header auth
    FT.attachAdminShortcut();
    FT.updateAuthUI();
    const btnLogout = document.getElementById('btn-logout');
    if (btnLogout) btnLogout.addEventListener('click', (e)=>{ e.preventDefault(); FT.logout(); });

    function renderTemples(sources){
      const list = document.getElementById('temples');
      list.innerHTML = '';
      // Ensure we present 4 plaques (3 sen-si + 1 tarot) for the landing UX
      const sen = (sources.find(s=>s.type==='Sen_Si')||{}).id || 1;
      const tar = (sources.find(s=>s.type==='Tarot')||{}).id || 99;
      const items = [
        { id: sen, name: '‡∏ß‡∏±‡∏î‡πÄ‡∏ó‡∏û‡∏û‡∏£‡∏∞‡πÅ‡∏°‡πà‡∏≠‡∏∏‡∏©‡∏≤‡∏°‡∏≤‡πÄ‡∏ó‡∏ß‡∏µ', type: 'Sen_Si' },
        { id: sen, name: '‡∏ß‡∏±‡∏î‡∏´‡∏•‡∏ß‡∏á‡∏û‡πà‡∏≠‡∏û‡∏±‡∏í‡∏ô‡πå', type: 'Sen_Si' },
        { id: sen, name: '‡∏ß‡∏±‡∏î‡πÇ‡∏û‡∏ò‡∏¥‡πå‡∏ä‡∏±‡∏¢ ‡∏´‡∏ô‡∏≠‡∏á‡∏Ñ‡∏≤‡∏¢ ‡∏´‡∏•‡∏ß‡∏á‡∏û‡πà‡∏≠‡∏û‡∏£‡∏∞‡πÉ‡∏™', type: 'Sen_Si' },
        { id: tar, name: '‡∏î‡∏π‡πÑ‡∏û‡πà‡∏¢‡∏¥‡∏õ‡∏ã‡∏µ (5/10 ‡πÉ‡∏ö)', type: 'Tarot' },
      ];
      items.forEach(s=>{
        const icon = s.type === 'Tarot' ? 'üé¥' : 'üõï';
        const div = document.createElement('div');
        div.className = 'plaque';
        div.innerHTML = `
          <div class="edges">
            <div class="edge left"></div>
            <div class="edge right"></div>
          </div>
          <div class="temple-card">
            <div class="temple-icon">${icon}</div>
            <div>
              <h3 class="plaque-title">${s.name}</h3>
              <button class="btn-gold" data-id="${s.id}">‡πÄ‡∏Ç‡πâ‡∏≤‡∏ß‡∏±‡∏î</button>
            </div>
          </div>
        `;
        div.querySelector('button').addEventListener('click', ()=>{
          const id = s.id;
          if (!FT.token){
            const next = encodeURIComponent(`../pages/packages.html?source_id=${id}`);
            FT.goto(`./pages/login.html?next=${next}&source_id=${id}`);
          }else{
            FT.goto(`./pages/packages.html?source_id=${id}`);
          }
        });
        list.appendChild(div);
      });
    }

    async function init(){
      try{
        const sources = await FT.apiSources();
        renderTemples(sources || []);
      }catch(_){
        // Fallback simple static items if backend not reachable
        renderTemples([{id:1,type:'Sen_Si'},{id:99,type:'Tarot'}]);
      }
    }
    init();
  </script>
</body>
</html>