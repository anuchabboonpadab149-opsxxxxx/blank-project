<!doctype html>
<html lang="th">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>р╣Ар╕Вр╣Йр╕▓р╕кр╕╣р╣Ир╕гр╕░р╕Ър╕Ъ тАв Fortune</title>
  <link href="https://fonts.googleapis.com/css2?family=Prompt:wght@300;400;600&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="../styles.css" />
</head>
<body>
  <div class="container">
    <header>
      <div class="brand"><a href="../index.html" style="color:#fff;text-decoration:none">ЁЯФо Fortune</a></div>
      <nav>
        <a href="../pages/packages.html">р╣Бр╕Юр╣Зр╕Бр╣Ар╕Бр╕И</a>
        <a href="../pages/draw.html">р╣Ар╕кр╕╡р╣Ир╕вр╕Зр╕Чр╕▓р╕в</a>
        <a href="../pages/history.html">р╕Ыр╕гр╕░р╕зр╕▒р╕Хр╕┤</a>
        <span id="nav-auth"><a href="../pages/login.html" class="active">р╣Ар╕Вр╣Йр╕▓р╕кр╕╣р╣Ир╕гр╕░р╕Ър╕Ъ</a></span>
        <span id="nav-me" class="hidden">р╕Ър╕▒р╕Нр╕Кр╕╡: <span id="me-id"></span> ┬╖ <a href="#" onclick="FT.logout()">р╕нр╕нр╕Б</a></span>
      </nav>
    </header>

    <div class="card hero">
      <h2>р╣Ар╕Вр╣Йр╕▓р╕кр╕╣р╣Ир╕гр╕░р╕Ър╕Ъ / р╕кр╕бр╕▒р╕Др╕гр╕кр╕бр╕▓р╕Кр╕┤р╕Б</h2>
      <p class="muted">р╕Бр╕гр╕нр╕Бр╕нр╕╡р╣Ар╕бр╕ер╣Бр╕ер╕░р╕гр╕лр╕▒р╕кр╕Ьр╣Ир╕▓р╕Щр╣Ар╕Юр╕╖р╣Ир╕нр╣Ар╕Вр╣Йр╕▓р╕кр╕╣р╣Ир╕гр╕░р╕Ър╕Ъ р╕лр╕гр╕╖р╕нр╕кр╕бр╕▒р╕Др╕гр╕кр╕бр╕▓р╕Кр╕┤р╕Бр╣Гр╕лр╕бр╣И</p>
    </div>

    <section class="card split">
      <div>
        <h3>р╕кр╕бр╕▒р╕Др╕гр╕кр╕бр╕▓р╕Кр╕┤р╕Б</h3>
        <input id="reg-email" placeholder="р╕нр╕╡р╣Ар╕бр╕е" />
        <input id="reg-pass" type="password" placeholder="р╕гр╕лр╕▒р╕кр╕Ьр╣Ир╕▓р╕Щ" />
        <button class="primary" id="btn-register">р╕кр╕бр╕▒р╕Др╕г</button>
      </div>
      <div>
        <h3>р╣Ар╕Вр╣Йр╕▓р╕кр╕╣р╣Ир╕гр╕░р╕Ър╕Ъ</h3>
        <input id="login-email" placeholder="р╕нр╕╡р╣Ар╕бр╕е" />
        <input id="login-pass" type="password" placeholder="р╕гр╕лр╕▒р╕кр╕Ьр╣Ир╕▓р╕Щ" />
        <button class="primary" id="btn-login">р╣Ар╕Вр╣Йр╕▓</button>
      </div>
    </section>

    <div class="footer">┬й Fortune</div>
  </div>

  <script src="../config.js"></script>
  <script src="../app.js"></script>
  <script>
    FT.attachAdminShortcut();
    FT.updateAuthUI();
    const next = FT.qsGet('next', '../pages/packages.html' + location.search);

    document.getElementById('btn-register').addEventListener('click', async ()=>{
      const email = document.getElementById('reg-email').value.trim();
      const pass = document.getElementById('reg-pass').value;
      if (!email || !pass) return alert('р╕Бр╕гр╕нр╕Бр╕нр╕╡р╣Ар╕бр╕ер╣Бр╕ер╕░р╕гр╕лр╕▒р╕кр╕Ьр╣Ир╕▓р╕Щ');
      try{
        await FT.apiRegister(email, pass);
        FT.updateAuthUI();
        FT.goto(next);
      }catch(e){ alert(e.message || e); }
    });

    document.getElementById('btn-login').addEventListener('click', async ()=>{
      const email = document.getElementById('login-email').value.trim();
      const pass = document.getElementById('login-pass').value;
      if (!email || !pass) return alert('р╕Бр╕гр╕нр╕Бр╕нр╕╡р╣Ар╕бр╕ер╣Бр╕ер╕░р╕гр╕лр╕▒р╕кр╕Ьр╣Ир╕▓р╕Щ');
      try{
        await FT.apiLogin(email, pass);
        FT.updateAuthUI();
        FT.goto(next);
      }catch(e){ alert(e.message || e); }
    });
  </script>
</body>
</html>