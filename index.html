<!doctype html>
<html lang="th">
<head>
  <meta charset="utf-8">
  <title>‡∏à‡∏±‡∏™‡∏°‡∏¥‡∏ô‡∏ä‡∏≠‡∏ö‡∏Å‡∏¥‡∏ô‡πÅ‡∏ã‡∏•‡∏°‡∏≠‡∏ô ‚Äî Live</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    :root {
      --bg: #0b0f14;
      --panel: #121821;
      --text: #e7f0fa;
      --muted: #8aa1b4;
      --accent: #ff4fb7;
      --ok: #19c37d;
      --warn: #ffb020;
      --err: #ff5a5a;
    }
    html, body { background: var(--bg); color: var(--text); margin: 0; font-family: system-ui, -apple-system, "Noto Sans Thai", Tahoma, sans-serif; }
    .wrap { max-width: 980px; margin: 24px auto; padding: 0 16px; }
    h1 { margin: 0 0 8px; font-size: 28px; }
    .sub { color: var(--muted); margin-bottom: 18px; }
    .grid { display: grid; grid-template-columns: 1fr; gap: 16px; }
    @media (min-width: 920px) { .grid { grid-template-columns: 1.6fr 1fr; } }
    .card { background: var(--panel); border: 1px solid #1e2633; border-radius: 12px; padding: 14px; }
    .title { margin: 0 0 12px; font-size: 15px; color: var(--muted); letter-spacing: .3px; }
    .content { white-space: pre-wrap; word-break: break-word; line-height: 1.5; font-size: 15px; }
    .row { display: flex; gap: 10px; align-items: center; flex-wrap: wrap; }
    .pill { background: #0f1520; border: 1px solid #1e2633; color: var(--muted); padding: 6px 10px; border-radius: 999px; font-size: 12px; }
    .btn { background: #1d2330; border: 1px solid #2c3648; color: var(--text); padding: 8px 12px; border-radius: 8px; cursor: pointer; font-size: 14px; }
    .btn:hover { filter: brightness(1.05); }
    .input { width: 100%; background: #0f1520; border: 1px solid #273041; color: var(--text); border-radius: 8px; padding: 8px 10px; font-size: 14px; }
    .small { font-size: 12px; color: var(--muted); }
    .ok { color: var(--ok); } .warn { color: var(--warn); } .err { color: var(--err); }
    .mono { font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", monospace; }
    .kbd { padding: 2px 6px; border: 1px solid #2c3648; border-bottom-width: 3px; border-radius: 6px; background: #0f1520; }
    a { color: #7cc3ff; text-decoration: none; }
    .mutelink { color: var(--muted); }
  </style>
</head>
<body>
  <div class="wrap">
    <h1>‡∏à‡∏±‡∏™‡∏°‡∏¥‡∏ô‡∏ä‡∏≠‡∏ö‡∏Å‡∏¥‡∏ô‡πÅ‡∏ã‡∏•‡∏°‡∏≠‡∏ô ‚Äî Live</h1>
    <div class="sub">
      ‡πÇ‡∏´‡∏°‡∏î‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥ 24/7 ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Ñ‡∏≠‡∏ô‡πÄ‡∏ó‡∏ô‡∏ï‡πå‡πÉ‡∏´‡∏°‡πà‡∏ó‡∏∏‡∏Å‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ
      <span id="backendState" class="pill">‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡πÅ‡∏ö‡πá‡∏Å‡πÄ‡∏≠‡∏ô‡∏î‡πå...</span>
    </div>

    <div class="grid">
      <div class="card">
        <div class="title">‡∏Ñ‡∏≠‡∏ô‡πÄ‡∏ó‡∏ô‡∏ï‡πå‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î</div>
        <div id="latest" class="content">‡∏£‡∏≠‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•...</div>
        <div class="row" style="margin-top:10px;">
          <span class="small">‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î: <span id="ts" class="mono">‚Äî</span></span>
        </div>
      </div>

      <div class="card">
        <div class="title">‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ (‡∏ù‡∏±‡πà‡∏á‡πÄ‡∏ö‡∏£‡∏≤‡∏ß‡πå‡πÄ‡∏ã‡∏≠‡∏£‡πå: DEMO MODE)</div>
        <div class="row" style="margin-bottom:8px;">
          <label class="small" style="min-width:120px;">‡∏ä‡πà‡∏ß‡∏á‡πÄ‡∏ß‡∏•‡∏≤ (‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ)</label>
          <input id="interval" type="number" min="1" value="1" class="input" style="max-width:120px;" />
          <button class="btn" onclick="applyInterval()">‡∏õ‡∏£‡∏±‡∏ö‡πÉ‡∏ä‡πâ</button>
          <button class="btn" onclick="tickOnce()">‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ó‡∏±‡∏ô‡∏ó‡∏µ</button>
        </div>
        <div class="row" style="gap:8px; margin-bottom:6px;">
          <span class="small">‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞:</span>
          <span id="modePill" class="pill">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡πÅ‡∏ö‡πá‡∏Å‡πÄ‡∏≠‡∏ô‡∏î‡πå...</span>
        </div>
        <div class="small">
          ‡∏•‡∏¥‡∏á‡∏Å‡πå‡∏£‡∏∞‡∏ö‡∏ö (‡∏ñ‡πâ‡∏≤‡∏°‡∏µ‡πÅ‡∏ö‡πá‡∏Å‡πÄ‡∏≠‡∏ô‡∏î‡πå): 
          <a class="mutelink" href="/healthz" target="_blank">/healthz</a> ¬∑
          <a class="mutelink" href="/events" target="_blank">/events</a> ¬∑
          <a class="mutelink" href="/api/recent" target="_blank">/api/recent</a> ¬∑
          <a class="mutelink" href="/api/feed" target="_blank">/api/feed</a> ¬∑
          <a class="mutelink" href="/credentials" target="_blank">/credentials</a>
        </div>
      </div>
    </div>

    <div class="card" style="margin-top:16px;">
      <div class="title">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞</div>
      <pre id="log" class="content mono" style="background:#0f1520; border-radius:8px; padding:10px; max-height:280px; overflow:auto;"></pre>
    </div>
  </div>

  <script>
    // ===== Persona: Jasmine x Salmon (client-side DEMO) =====
    const SALMON_TAGS = ["#‡∏à‡∏±‡∏™‡∏°‡∏¥‡∏ô‡∏ä‡∏≠‡∏ö‡∏Å‡∏¥‡∏ô‡πÅ‡∏ã‡∏•‡∏°‡∏≠‡∏ô","#‡∏ã‡∏≤‡∏ä‡∏¥‡∏°‡∏¥","#‡∏ß‡∏≤‡∏ã‡∏≤‡∏ö‡∏¥","#‡∏õ‡∏•‡∏≤‡∏î‡∏¥‡∏ö‡∏≠‡∏∏‡πà‡∏ô‡πÉ‡∏à","#Bee‡∏£‡∏±‡∏ÅJasmine","#‡∏£‡∏±‡∏Å‡∏ó‡∏∏‡∏Å‡∏Ñ‡∏≥‡∏ó‡∏µ‡πà‡∏°‡∏µ‡πÅ‡∏ã‡∏•‡∏°‡∏≠‡∏ô"];
    const OPENERS = [
      "‡∏Ñ‡∏∑‡∏ô‡∏ô‡∏µ‡πâ‡∏ß‡πà‡∏≤‡∏á‡πÑ‡∏´‡∏°‡∏Ñ‡∏∞? ‡πÅ‡∏ã‡∏•‡∏°‡∏≠‡∏ô‡∏•‡∏∞‡∏•‡∏≤‡∏¢‡πÉ‡∏ô‡πÉ‡∏à‡∏´‡∏ô‡∏π‡∏≠‡∏µ‡∏Å‡πÅ‡∏•‡πâ‡∏ß",
      "‡∏ó‡∏∏‡∏Å‡∏Ñ‡∏≥‡∏ó‡∏µ‡πà‡πÑ‡∏î‡πâ‡∏Å‡∏¥‡∏ô ‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡πÑ‡∏î‡πâ‡∏Å‡∏≠‡∏î‡∏Ñ‡∏∏‡∏ì‡πÅ‡∏ô‡πà‡∏ô‡πÜ",
      "‡∏à‡∏∞‡∏û‡∏≤‡πÑ‡∏õ‡∏Å‡∏¥‡∏ô‡∏ã‡∏≤‡∏ä‡∏¥‡∏°‡∏¥ ‡πÅ‡∏•‡πâ‡∏ß‡∏à‡∏ö‡∏ó‡∏µ‡πà‡πÑ‡∏≠‡∏ï‡∏¥‡∏°‡∏°‡∏±‡πâ‡∏¢‡∏Ñ‡∏∞",
      "‡∏£‡∏±‡∏Å‡∏ó‡∏µ‡πà‡∏î‡∏µ‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡∏Ç‡πâ‡∏≤‡∏ß‡∏ç‡∏µ‡πà‡∏õ‡∏∏‡πà‡∏ô‚Äî‡∏ô‡∏∏‡πà‡∏° ‡∏≠‡∏∏‡πà‡∏ô ‡πÅ‡∏•‡∏∞‡πÅ‡∏ô‡πà‡∏ô‡∏´‡∏±‡∏ß‡πÉ‡∏à",
      "‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á‡∏ß‡∏≤‡∏ã‡∏≤‡∏ö‡∏¥‡πÄ‡∏ú‡πá‡∏î‡∏à‡∏µ‡πä‡∏î ‡∏Å‡∏±‡∏ö‡∏Ñ‡∏∏‡∏ì‡∏ó‡∏µ‡πà‡∏ó‡∏≥‡πÉ‡∏à‡πÄ‡∏ï‡πâ‡∏ô‡πÅ‡∏£‡∏á ‡∏´‡∏ô‡∏π‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ó‡∏±‡πâ‡∏á‡∏Ñ‡∏π‡πà"
    ];
    const CORE = [
      "‡∏ö‡∏µ‡∏£‡∏±‡∏Å‡∏à‡∏±‡∏™‡∏°‡∏¥‡∏ô‡∏ä‡∏≠‡∏ö‡∏Å‡∏¥‡∏ô‡πÅ‡∏ã‡∏•‡∏°‡∏≠‡∏ô‡∏ô‡∏∞ ‡∏Ç‡∏≠‡∏ö‡∏Ñ‡∏∏‡∏ì‡∏ó‡∏µ‡πà‡πÄ‡∏Ñ‡∏¢‡∏ã‡∏±‡∏û‡∏û‡∏≠‡∏ï‡∏Å‡∏±‡∏ô‡πÄ‡∏™‡∏°‡∏≠‡∏≠‡∏¢‡∏π‡πà‡∏Ç‡πâ‡∏≤‡∏á‡πÜ‡∏ï‡∏•‡∏≠‡∏îüíñüíç",
      "‡∏£‡∏±‡∏Å‡∏à‡∏∞‡∏´‡∏ß‡∏≤‡∏ô‡∏Ç‡∏∂‡πâ‡∏ô 99% ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏°‡∏µ‡πÅ‡∏ã‡∏•‡∏°‡∏≠‡∏ô‡∏≠‡∏¢‡∏π‡πà‡∏ï‡∏£‡∏á‡∏´‡∏ô‡πâ‡∏≤",
      "‡∏ñ‡πâ‡∏≤‡πÉ‡∏à‡πÄ‡∏£‡∏≤‡∏ã‡∏≠‡∏ü‡∏ó‡πå ‡πÅ‡∏ã‡∏•‡∏°‡∏≠‡∏ô‡∏Å‡πá‡∏•‡∏∞‡∏•‡∏≤‡∏¢‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡∏Å‡∏±‡∏ô",
      "‡∏Ñ‡∏∑‡∏ô‡∏ô‡∏µ‡πâ‡∏ù‡∏≤‡∏Å‡∏´‡∏±‡∏ß‡πÉ‡∏à‡πÑ‡∏ß‡πâ‡πÉ‡∏ô‡πÇ‡∏ä‡∏¢‡∏∏‡∏´‡∏ô‡πà‡∏≠‡∏¢‡∏ô‡∏∞‡∏Ñ‡∏∞",
      "‡πÉ‡∏´‡πâ‡∏´‡∏ô‡∏π‡πÄ‡∏õ‡πá‡∏ô‡πÄ‡∏´‡∏ï‡∏∏‡∏ú‡∏•‡∏ó‡∏µ‡πà‡∏Ñ‡∏∏‡∏ì‡∏≠‡∏¢‡∏≤‡∏Å‡∏Å‡∏•‡∏±‡∏ö‡∏ö‡πâ‡∏≤‡∏ô‡πÑ‡∏ß‡πÜ"
    ];
    const PLAYFUL = [
      "‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏™‡∏±‡πà‡∏á Omakase ‡πÉ‡∏™‡πà‡πÉ‡∏à‡πÉ‡∏´‡πâ‡∏Ñ‡∏∏‡∏ì‡∏Ñ‡πà‡∏∞",
      "‡∏à‡∏∏‡πä‡∏ö‡∏ß‡∏≤‡∏ã‡∏≤‡∏ö‡∏¥‡∏´‡∏ô‡∏∂‡πà‡∏á‡∏ó‡∏µ = ‡∏Æ‡∏µ‡∏•‡∏ó‡∏±‡∏ô‡∏ó‡∏µ",
      "‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏£‡∏≤‡πÑ‡∏°‡πà‡πÅ‡∏û‡∏á ‡πÄ‡∏ó‡∏µ‡∏¢‡∏ö‡∏Å‡∏±‡∏ö‡∏ä‡∏∏‡∏î‡∏ã‡∏≤‡∏ä‡∏¥‡∏°‡∏¥‡∏û‡∏£‡∏µ‡πÄ‡∏°‡∏µ‡∏¢‡∏°‡∏Å‡πá‡∏¢‡∏±‡∏á‡∏Ñ‡∏∏‡πâ‡∏°",
      "‡∏õ‡πâ‡∏≠‡∏ô‡∏Å‡∏±‡∏ô‡πÑ‡∏õ‡∏õ‡πâ‡∏≠‡∏ô‡∏Å‡∏±‡∏ô‡∏°‡∏≤ ‡∏à‡∏ô‡πÉ‡∏à‡πÄ‡∏ï‡πâ‡∏ô‡πÅ‡∏ó‡∏ö‡∏´‡∏•‡∏∏‡∏î",
      "‡∏Ñ‡∏ß‡∏á‡∏Å‡∏±‡∏ô‡πÑ‡∏õ‡∏ï‡∏•‡∏≤‡∏î‡∏õ‡∏•‡∏≤‡πÑ‡∏´‡∏°‡∏Ñ‡∏∞"
    ];
    const SPICY = [
      "‡πÄ‡∏ú‡πá‡∏î‡∏ß‡∏≤‡∏ã‡∏≤‡∏ö‡∏¥‡∏´‡∏£‡∏∑‡∏≠‡πÄ‡∏ú‡πá‡∏î‡πÉ‡∏à‡πÄ‡∏£‡∏≤ ‡∏•‡∏≠‡∏á‡∏°‡∏±‡πâ‡∏¢‡∏Ñ‡∏∞ üòâ",
      "‡∏ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡∏ä‡∏≠‡∏ö‡πÄ‡∏ú‡πá‡∏î ‡πÄ‡∏î‡∏µ‡πã‡∏¢‡∏ß‡∏´‡∏ô‡∏π‡∏õ‡∏£‡∏±‡∏ö‡πÉ‡∏´‡πâ‡∏´‡∏ß‡∏≤‡∏ô‡πÅ‡∏ó‡∏ô",
      "‡∏Ñ‡∏≥‡∏ï‡πà‡∏≠‡πÑ‡∏õ‚Äî‡∏õ‡∏≤‡∏Å‡∏´‡∏£‡∏∑‡∏≠‡∏õ‡∏•‡∏≤ ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏•‡∏¢‡∏Ñ‡πà‡∏∞",
      "‡∏≠‡∏¢‡∏≤‡∏Å‡πÇ‡∏î‡∏ô‡∏Ñ‡∏∏‡∏ì‡∏Ñ‡∏µ‡∏ö ‡πÉ‡∏™‡πà‡∏´‡∏±‡∏ß‡πÉ‡∏à‡∏´‡∏ô‡πà‡∏≠‡∏¢",
      "‡∏Ç‡∏≠‡∏à‡∏≠‡∏á‡∏ï‡∏±‡∏Å‡∏Ñ‡∏∏‡∏ì‡πÑ‡∏ß‡πâ‡∏ó‡∏±‡πâ‡∏á‡∏Ñ‡∏∑‡∏ô"
    ];
    const EMO = ["üç£","üß°","üíñ","üî•","‚ú®","ü•¢","üòò","üéß","üé¨","ü´∂"];

    function makeText(sender="‡∏à‡∏±‡∏™‡∏°‡∏¥‡∏ô‡∏ä‡∏≠‡∏ö‡∏Å‡∏¥‡∏ô‡πÅ‡∏ã‡∏•‡∏°‡∏≠‡∏ô") {
      const now = new Date().toLocaleString("th-TH");
      const pick = (arr)=>arr[Math.floor(Math.random()*arr.length)];
      const rands = (arr, n)=>arr.slice().sort(()=>Math.random()-0.5).slice(0,n);
      const opener = pick(OPENERS);
      const core = pick(CORE);
      const playful = pick(PLAYFUL);
      const spicy = pick(SPICY);
      const tags = rands(SALMON_TAGS, 3).join(" ");
      const emojis = rands(EMO, 3).join("");
      return `${opener}
${core}
${playful} ${spicy}
${tags} ${emojis}
‚Äî ${sender} | ${now}`;
    }

    // ===== UI + Backend detection =====
    const latestEl = document.getElementById("latest");
    const tsEl = document.getElementById("ts");
    const logEl = document.getElementById("log");
    const modePill = document.getElementById("modePill");
    const backendState = document.getElementById("backendState");
    const intervalEl = document.getElementById("interval");

    let demoTimer = null;
    let mode = "checking"; // checking | backend | demo

    function logLine(s) {
      const ts = new Date().toISOString();
      logEl.textContent = `[${ts}] ${s}\n` + logEl.textContent;
    }

    function setMode(m) {
      mode = m;
      if (m === "backend") {
        modePill.textContent = "‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡πÅ‡∏ö‡πá‡∏Å‡πÄ‡∏≠‡∏ô‡∏î‡πå‡πÅ‡∏•‡πâ‡∏ß (SSE)";
        modePill.classList.remove("warn"); modePill.classList.add("ok");
        backendState.textContent = "‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡πÅ‡∏ö‡πá‡∏Å‡πÄ‡∏≠‡∏ô‡∏î‡πå‡πÅ‡∏•‡πâ‡∏ß";
        backendState.classList.add("ok");
      } else if (m === "demo") {
        modePill.textContent = "DEMO MODE (‡∏ù‡∏±‡πà‡∏á‡πÄ‡∏ö‡∏£‡∏≤‡∏ß‡πå‡πÄ‡∏ã‡∏≠‡∏£‡πå)";
        modePill.classList.remove("ok"); modePill.classList.add("warn");
        backendState.textContent = "‡πÑ‡∏°‡πà‡∏°‡∏µ‡πÅ‡∏ö‡πá‡∏Å‡πÄ‡∏≠‡∏ô‡∏î‡πå ‚Äî ‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡πÅ‡∏ö‡∏ö DEMO ‡πÉ‡∏ô‡πÄ‡∏ö‡∏£‡∏≤‡∏ß‡πå‡πÄ‡∏ã‡∏≠‡∏£‡πå";
        backendState.classList.remove("ok"); backendState.classList.add("warn");
      } else {
        modePill.textContent = "‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡πÅ‡∏ö‡πá‡∏Å‡πÄ‡∏≠‡∏ô‡∏î‡πå...";
        backendState.textContent = "‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡πÅ‡∏ö‡πá‡∏Å‡πÄ‡∏≠‡∏ô‡∏î‡πå...";
      }
    }

    function updateLatest(txt) {
      latestEl.textContent = txt;
      tsEl.textContent = new Date().toLocaleTimeString("th-TH");
    }

    function startDemoLoop() {
      if (demoTimer) clearInterval(demoTimer);
      const iv = Math.max(1, parseInt(intervalEl.value || "1", 10));
      updateLatest(makeText());
      demoTimer = setInterval(()=> updateLatest(makeText()), iv * 1000);
      setMode("demo");
      logLine("‡πÄ‡∏£‡∏¥‡πà‡∏° DEMO MODE: ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Ñ‡∏≠‡∏ô‡πÄ‡∏ó‡∏ô‡∏ï‡πå‡∏ù‡∏±‡πà‡∏á‡πÄ‡∏ö‡∏£‡∏≤‡∏ß‡πå‡πÄ‡∏ã‡∏≠‡∏£‡πå‡∏ó‡∏∏‡∏Å " + iv + " ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ");
    }

    function applyInterval() {
      if (mode === "demo") {
        startDemoLoop();
      }
      logLine("‡∏õ‡∏£‡∏±‡∏ö‡∏ä‡πà‡∏ß‡∏á‡πÄ‡∏ß‡∏•‡∏≤‡πÄ‡∏õ‡πá‡∏ô " + intervalEl.value + " ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ");
    }

    function tickOnce() {
      updateLatest(makeText());
      logLine("‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Ñ‡∏≠‡∏ô‡πÄ‡∏ó‡∏ô‡∏ï‡πå‡∏´‡∏ô‡∏∂‡πà‡∏á‡∏Ñ‡∏£‡∏±‡πâ‡∏á (manual)");
    }

    // Try SSE backend
    (function init() {
      setMode("checking");
      let opened = false;
      try {
        const es = new EventSource("/events");
        const timeout = setTimeout(() => {
          if (!opened) {
            es.close();
            logLine("SSE ‡πÑ‡∏°‡πà‡∏ï‡∏≠‡∏ö‡πÉ‡∏ô‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏µ‡πà‡∏Å‡∏≥‡∏´‡∏ô‡∏î ‚Äî ‡∏™‡∏•‡∏±‡∏ö‡πÄ‡∏õ‡πá‡∏ô DEMO MODE");
            startDemoLoop();
          }
        }, 2500);

        es.onopen = () => {
          opened = true;
          clearTimeout(timeout);
          setMode("backend");
          logLine("SSE ‡πÄ‡∏õ‡∏¥‡∏î‡πÅ‡∏•‡πâ‡∏ß");
        };
        es.onmessage = (ev) => {
          try {
            const data = JSON.parse(ev.data);
            if (data && data.type === "post" && data.item && data.item.text) {
              updateLatest(data.item.text);
            }
          } catch (e) {}
        };
        es.onerror = () => {
          if (!opened) {
            clearTimeout(timeout);
            logLine("‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠ SSE ‡∏•‡πâ‡∏°‡πÄ‡∏´‡∏•‡∏ß ‚Äî ‡∏ó‡∏≥‡∏á‡∏≤‡∏ô DEMO MODE");
            startDemoLoop();
          }
        };
      } catch (e) {
        logLine("‡πÄ‡∏ö‡∏£‡∏≤‡∏ß‡πå‡πÄ‡∏ã‡∏≠‡∏£‡πå‡πÑ‡∏°‡πà‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö SSE ‡∏´‡∏£‡∏∑‡∏≠‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î ‚Äî DEMO MODE");
        startDemoLoop();
      }
    })();
  </script>
</body>
</html>